<!-- <!DOCTYPE html>
<html>
<head>
  <title>Apple MusicKit JS Reliable Init Example</title>
  <script src="https://js-cdn.music.apple.com/musickit/v3/musickit.js"></script>
</head>
<body>
  <h2>Apple Music Authorization</h2>
  <button id="authorizeBtn" disabled>Authorize</button>
  <pre id="output"></pre>
  <script>
    let music;
    function initializeMusicKit() {
      if (window.MusicKit) {
        console.log('MusicKit JS is present!');
        try {
          MusicKit.configure({
            developerToken: 'eyJraWQiOiI3S001TkM5RFM3IiwidHlwIjoiSldUIiwiYWxnIjoiRVMyNTYifQ.eyJhdWQiOiJhcHBzdG9yZWNvbm5lY3QtdjEiLCJpc3MiOiI0WlczMzlVM0c4IiwiZXhwIjoxNzY1MDcxNTg1LCJpYXQiOjE3NjQ5ODUxODV9.7UcDDNXIbtnKD3boEXzQSd-tqLOmM2VWcieVVYzc5UuAV3Ht5sEXvXvXDElnyRSjWgx-Mpsx8fVMgyRBGggFRw',
            app: { name: 'com.pasa.mediaplayer', build: '1.0' }
          });
          music = MusicKit.getInstance();
          console.log('MusicKit instance:', music);
          document.getElementById('authorizeBtn').disabled = false;
        } catch (error) {
          console.error('MusicKit configure error:', error);
        }
      } else {
        console.log('MusicKit JS is NOT loaded.');
      }
    }
    // Wait until JS likely loaded, then initialize
    setTimeout(initializeMusicKit, 2000);

    document.getElementById('authorizeBtn').onclick = function() {
      console.log('Authorize button clicked');
      document.getElementById('output').textContent = '';
      if (!music) {
        console.log('MusicKit not initialized yet.');
        document.getElementById('output').textContent = 'MusicKit not initialized yet. Please wait and try again.';
        return;
      }
      music.authorize()
        .then(function(userToken) {
          console.log('Authorization successful. User token:', userToken);
          document.getElementById('output').textContent = 'User Token:\n\n' + userToken;
        })
        .catch(function(error) {
          console.error('Authorization failed:', error);
          document.getElementById('output').textContent = 'Authorization failed:\n\n' + error;
        });
    };
  </script>
</body>
</html> -->



<!DOCTYPE html>
<html>
<head>
  <title>Apple MusicKit JS Example (No musickitloaded)</title>
  <script src="https://js-cdn.music.apple.com/musickit/v3/musickit.js"></script>
</head>
<body>
  <h2>Apple Music Authorization</h2>
  <button id="authorizeBtn" disabled>Authorize</button>
  <pre id="output"></pre>
<script>
  document.addEventListener('musickitloaded', function() {
    console.log('musickitloaded event fired');
    try {
      MusicKit.configure({
        developerToken: 'eyJraWQiOiI3S001TkM5RFM3IiwidHlwIjoiSldUIiwiYWxnIjoiRVMyNTYifQ.eyJhdWQiOiJhcHBzdG9yZWNvbm5lY3QtdjEiLCJpc3MiOiI0WlczMzlVM0c4IiwiZXhwIjoxNzY1MDcxNTg1LCJpYXQiOjE3NjQ5ODUxODV9.7UcDDNXIbtnKD3boEXzQSd-tqLOmM2VWcieVVYzc5UuAV3Ht5sEXvXvXDElnyRSjWgx-Mpsx8fVMgyRBGggFRw',
        app: { name: 'com.pasa.mediaplayer', build: '1.0' }
      });
      const music = MusicKit.getInstance();
      console.log('MusicKit instance inside musickitloaded:', music);
      document.getElementById('authorizeBtn').disabled = false;
      document.getElementById('authorizeBtn').onclick = function() {
        console.log('Authorize button clicked');
        document.getElementById('output').textContent = '';
        music.authorize()
          .then(function(userToken) {
            console.log('Authorization successful. User token:', userToken);
            document.getElementById('output').textContent = 'User Token:\n\n' + userToken;
          })
          .catch(function(error) {
            console.error('Authorization failed:', error);
            document.getElementById('output').textContent = 'Authorization failed:\n\n' + error;
          });
      };
    } catch (error) {
      console.error('Error configuring MusicKit:', error);
    }
  });
</script>
</body>
</html>


<!-- 
<!DOCTYPE html>
<html>
<head>
  <title>Apple MusicKit JS Example (No musickitloaded)</title>
  <script src="https://js-cdn.music.apple.com/musickit/v3/musickit.js"></script>
</head>
<body>
  <h2>Apple Music Authorization</h2>
  <button id="authorizeBtn" disabled>Authorize</button>
  <pre id="output"></pre>
  <script>
    let music; // Declare music variable in outer scope

    setTimeout(function() {
      if (window.MusicKit) {
        console.log('MusicKit JS is present!');
        MusicKit.configure({
        developerToken: 'eyJraWQiOiI3S001TkM5RFM3IiwidHlwIjoiSldUIiwiYWxnIjoiRVMyNTYifQ.eyJhdWQiOiJhcHBzdG9yZWNvbm5lY3QtdjEiLCJpc3MiOiI0WlczMzlVM0c4IiwiZXhwIjoxNzY1MDcxNTg1LCJpYXQiOjE3NjQ5ODUxODV9.7UcDDNXIbtnKD3boEXzQSd-tqLOmM2VWcieVVYzc5UuAV3Ht5sEXvXvXDElnyRSjWgx-Mpsx8fVMgyRBGggFRw',
          app: { name: 'com.pasa.mediaplayer', build: '1.0' }
        });
        music = MusicKit.getInstance(); // Assign to outer variable

        // Enable the button only after MusicKit is initialized
        document.getElementById('authorizeBtn').disabled = false;
        console.log('Authorize button enabled');
      } else {
        console.log('MusicKit JS is NOT loaded.');
        alert('MusicKit JS is NOT loaded.');
      }
    }, 2000);

    document.getElementById('authorizeBtn').onclick = function() {
      console.log('Authorize button clicked');
      document.getElementById('output').textContent = '';
      if (!music) {
        console.log('MusicKit not initialized yet.');
        document.getElementById('output').textContent = 'MusicKit not initialized yet. Please wait and try again.';
        return;
      }
      music.authorize()
        .then(function(userToken) {
          console.log('Authorization successful. User token:', userToken);
          document.getElementById('output').textContent = 'User Token:\n\n' + userToken;
        })
        .catch(function(error) {
          console.error('Authorization failed:', error);
          document.getElementById('output').textContent = 'Authorization failed:\n\n' + error;
        });
    };
  </script>
</body>
</html> -->


<!-- <!DOCTYPE html>
<html>
<head>
  <title>Apple MusicKit JS Example (No musickitloaded)</title>
  <script src="https://js-cdn.music.apple.com/musickit/v3/musickit.js"></script>
</head>
<body>
  <h2>Apple Music Authorization</h2>
  <button id="authorizeBtn">Authorize</button>
  <pre id="output"></pre>
  <script>
    let music; // Declare music variable in outer scope

    setTimeout(function() {
      if (window.MusicKit) {
        console.log('MusicKit JS is present!');
        MusicKit.configure({
        developerToken: 'eyJraWQiOiI3S001TkM5RFM3IiwidHlwIjoiSldUIiwiYWxnIjoiRVMyNTYifQ.eyJhdWQiOiJhcHBzdG9yZWNvbm5lY3QtdjEiLCJpc3MiOiI0WlczMzlVM0c4IiwiZXhwIjoxNzY1MDcxNTg1LCJpYXQiOjE3NjQ5ODUxODV9.7UcDDNXIbtnKD3boEXzQSd-tqLOmM2VWcieVVYzc5UuAV3Ht5sEXvXvXDElnyRSjWgx-Mpsx8fVMgyRBGggFRw',
          app: { name: 'com.pasa.mediaplayer', build: '1.0' }
        });
        music = MusicKit.getInstance(); // Assign to outer variable
      } else {
        console.log('MusicKit JS is NOT loaded.');
        alert('MusicKit JS is NOT loaded.');
      }
    }, 2000);

    document.getElementById('authorizeBtn').onclick = function() {
      console.log('Authorize button clicked');
      document.getElementById('output').textContent = '';
      if (!music) {
        console.log('MusicKit not initialized yet.');
        document.getElementById('output').textContent = 'MusicKit not initialized yet. Please wait and try again.';
        return;
      }
      music.authorize()
        .then(function(userToken) {
          console.log('Authorization successful. User token:', userToken);
          document.getElementById('output').textContent = 'User Token:\n\n' + userToken;
        })
        .catch(function(error) {
          console.error('Authorization failed:', error);
          document.getElementById('output').textContent = 'Authorization failed:\n\n' + error;
        });
    };
  </script>
</body>
</html> -->



<!-- <!DOCTYPE html>
<html>
<head>
  <title>Apple MusicKit JS Example (No musickitloaded)</title>
  <script src="https://js-cdn.music.apple.com/musickit/v3/musickit.js"></script>
</head>
<body>
  <h2>Apple Music Authorization</h2>
  <button id="authorizeBtn">Authorize</button>
  <pre id="output"></pre>
  <script>
    // Wait for MusicKit JS to load (2 seconds is enough)
    setTimeout(function() {
      if (window.MusicKit) {
        console.log('MusicKit JS is present!');
        MusicKit.configure({
        developerToken: 'eyJraWQiOiI3S001TkM5RFM3IiwidHlwIjoiSldUIiwiYWxnIjoiRVMyNTYifQ.eyJhdWQiOiJhcHBzdG9yZWNvbm5lY3QtdjEiLCJpc3MiOiI0WlczMzlVM0c4IiwiZXhwIjoxNzY1MDcxNTg1LCJpYXQiOjE3NjQ5ODUxODV9.7UcDDNXIbtnKD3boEXzQSd-tqLOmM2VWcieVVYzc5UuAV3Ht5sEXvXvXDElnyRSjWgx-Mpsx8fVMgyRBGggFRw',
        app: { name: 'com.pasa.mediaplayer', build: '1.0' }
        });
        const music = MusicKit.getInstance();
        document.getElementById('authorizeBtn').onclick = function() {
          console.log('Authorize button clicked');
          document.getElementById('output').textContent = '';
          music.authorize()
            .then(function(userToken) {
              console.log('Authorization successful. User token:', userToken);
              document.getElementById('output').textContent = 'User Token:\n\n' + userToken;
            })
            .catch(function(error) {
              console.error('Authorization failed:', error);
              document.getElementById('output').textContent = 'Authorization failed:\n\n' + error;
            });
        };
      } else {
        console.log('MusicKit JS is NOT loaded.');
        alert('MusicKit JS is NOT loaded.');
      }
    }, 2000);
  </script>
</body>
</html> -->






<!-- 
<!DOCTYPE html>
<html>
<head>
  <title>Apple MusicKit JS Example with Logs</title>
  <script src="https://js-cdn.music.apple.com/musickit/v3/musickit.js"></script>
</head>
<body>
  <h2>Apple Music Authorization</h2>
  <button id="authorizeBtn" disabled>Authorize</button>
  <pre id="output"></pre>
  <script>
    // SHOWS MUSICKIT ******************************************************************************************
    setTimeout(function() {
      console.log('window.MusicKit:', window.MusicKit);
      if (window.MusicKit) {
        console.log('MusicKit JS is present!');
      } else {
        console.log('MusicKit JS is NOT loaded.');
      }
    }, 2000);
  </script>
</body>
</html> -->








<!-- <!DOCTYPE html>
<html>
<head>
  <title>Apple Music Token Auth</title>
  <script src="https://js-cdn.music.apple.com/musickit/v3/musickit.js"></script>
</head>
<body>
  <h2>Apple Music Authorization</h2>
  <button id="authorizeBtn">Authorize</button>
  <script>
    console.log('SHOWS MUSICKET');
    
    // Wait for MusicKit to be loaded
    document.addEventListener('musickitloaded', function() {
      MusicKit.configure({
        developerToken: 'eyJraWQiOiI3S001TkM5RFM3IiwidHlwIjoiSldUIiwiYWxnIjoiRVMyNTYifQ.eyJhdWQiOiJhcHBzdG9yZWNvbm5lY3QtdjEiLCJpc3MiOiI0WlczMzlVM0c4IiwiZXhwIjoxNzY0OTE5MzIzLCJpYXQiOjE3NjQ4MzI5MjN9.TO5fOhkYu87wLcfH0SAFHzUBmiXDOhgqEgYFPsUK9fqIfZcWjjl86ixbhod-ryCDywdg9aUH90fN5Z7rDLOB3A',
        app: { name: 'com.pasa.mediaplayer', build: '1.0' }
      });
      const music = MusicKit.getInstance();
      // Attach click handler here, AFTER initialization
      document.getElementById('authorizeBtn').onclick = function() {
        console.log('Authorize button clicked');
        music.authorize().then(function(userToken) {
          alert('User Token: ' + userToken);
          // console.log('User Token: ' + userToken);
        }).catch(function(err) {
          alert('Authorization failed: ' + err);
          //console.log('Authorization failed: ' + err);
        });
      };
    });
  </script>
</body>
</html> -->









<!-- 
<!DOCTYPE html>
<html>
<head>
  <title>Apple Music Token Auth</title>
  <script src="https://js-cdn.music.apple.com/musickit/v3/musickit.js" data-web-components async></script>
</head>
<body>
  <h2>Apple Music Authorization</h2>
  <button id="authorizeBtn">Authorize</button>
  <script>
    let music; // declare this outside functions to make it accessible

    // Wait a bit for MusicKit JS to load
    setTimeout(function() {
      if (window.MusicKit) {
        MusicKit.configure({
          developerToken: 'eyJraWQiOiI3S001TkM5RFM3IiwidHlwIjoiSldUIiwiYWxnIjoiRVMyNTYifQ.eyJhdWQiOiJhcHBzdG9yZWNvbm5lY3QtdjEiLCJpc3MiOiI0WlczMzlVM0c4IiwiZXhwIjoxNzY1MDYxNTU2LCJpYXQiOjE3NjQ5NzUxNTZ9.0OiccGfYjx8ZValMtL2DwxQ0KPp_5tpGLbaGIk_PZrYmi7VARsA6GN0UGJSRHKBydezyeFDn3bKl3Kdcg1LE1',
          app: {
            name: 'com.pasa.mediaplayer',
            build: '1.0'
          }
        });
        music = MusicKit.getInstance();
      } else {
        alert('MusicKit JS did not load!');
      }
    }, 1000);

    document.getElementById('authorizeBtn').onclick = function() {
      if (music) {
        music.authorize().then(function(userToken) {
          alert('User Token: ' + userToken);
        }).catch(function(err) {
          alert('Authorization failed: ' + err);
        });
      } else {
        alert('MusicKit JS not loaded yet. Please wait and try again.');
      }
    };
  </script>
</body>
</html> -->
